const isOpenClass="modal-is-open",openingClass="modal-is-opening",closingClass="modal-is-closing",animationDuration=400;let visibleModal=null;const toggleModal=e=>{e.preventDefault();const t=document.getElementById(e.currentTarget.getAttribute("data-target"));void 0!==t&&null!=t&&isModalOpen(t)?closeModal(t):openModal(t)},isModalOpen=e=>!(!e.hasAttribute("open")||"false"==e.getAttribute("open")),openModal=e=>{isScrollbarVisible()&&document.documentElement.style.setProperty("--scrollbar-width",`${getScrollbarWidth()}px`),document.documentElement.classList.add(isOpenClass,openingClass),setTimeout((()=>{visibleModal=e,document.documentElement.classList.remove(openingClass)}),400),e.setAttribute("open",!0)},closeModal=e=>{visibleModal=null,document.documentElement.classList.add(closingClass),setTimeout((()=>{document.documentElement.classList.remove(closingClass,isOpenClass),document.documentElement.style.removeProperty("--scrollbar-width"),e.removeAttribute("open")}),400)};document.addEventListener("click",(e=>{if(null!=visibleModal){!visibleModal.querySelector("article").contains(e.target)&&closeModal(visibleModal)}})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&null!=visibleModal&&closeModal(visibleModal)}));const getScrollbarWidth=()=>{const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const o=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),o},isScrollbarVisible=()=>document.body.scrollHeight>screen.height;function checkURL(e){var t=e.value;return~t.indexOf("://")||(t="https://"+t),e.value=t,e}function changeData(e,t,o,n){document.getElementById("id").value=e,document.getElementById("title").value=t,document.getElementById("link").value=o,document.getElementById("tags").value=n}function randomBgColor(){var e=["#ADD8E6","#F08080","#E0FFFF","#FAFAD2","#D3D3D3","#90EE90","#FFB6C1","#FFA07A","#20B2AA","#87CEFA","#778899","#B0C4DE","#FFFFE0"];return e[Math.floor(Math.random()*e.length)]}function toggleTag(e){var t=String(e);document.querySelectorAll("span.tag").forEach((e=>{e.style.opacity=.7,e.style.border="none",e.style.color="unset",e.setAttribute("aria-selected",!1)})),localStorage.getItem("tag")==t?(Array.from(document.getElementById("bookmarks").children).map((function(e){e.style.display="block"})),localStorage.removeItem("tag")):(Array.from(document.getElementById("bookmarks").children).map((function(e){if(e.style.display="none",(o=String(e.getAttribute("data-tags"))).includes(t)){e.style.display="block";var o="span[data-tag*='"+t+"']";document.querySelectorAll(o).forEach((e=>{e.style.color="var(--pico-primary)",e.style.opacity=1,e.setAttribute("aria-selected",!0)}))}})),localStorage.setItem("tag",t))}function topTags(){var e=Array.from(document.querySelectorAll("span.tag"),(e=>e.textContent)).map((function(e){return e})),t={};e.map((function(e){e in t?t[e]++:t[e]=1}));var o=Object.keys(t).sort((function(e,o){return t[e]-t[o]}));let n=5*Math.round(Math.sqrt(Object.keys(t).length)/5);n=n>10?10:n;var l=o.slice(Math.max(o.length-n,1));l=l.reverse();const a=document.getElementById("top-tags-placeholder");l.forEach((e=>{let t=document.createElement("li"),o=document.createElement("span");o.classList.add("tag"),t.classList.add("top-tag"),o.dataset.tag=e,o.setAttribute("aria-controls",e),o.setAttribute("aria-selected",!1),o.setAttribute("tabindex",0),o.addEventListener("click",(function(){toggleTag(e)})),o.innerText=e,t.appendChild(o),a.before(t)}))}function generateBackgroundColors(){const e=new ColorThief;document.querySelectorAll("div#bookmarks article").forEach((function(t){var o=window.getComputedStyle(t).backgroundImage;"none"===o&&(t.style.background="linear-gradient(to bottom, white 0%,"+randomBgColor()+"  100%)");const n=document.createElement("img");var l=o.slice(4,-1).replace(/"/g,"");n.src=l,n.crossOrigin="anonymous",n.onload=()=>{const o=e.getPalette(n,2)[1];t.style.backgroundColor=`rgb(${o[0]},${o[1]},${o[2]},0.33)`}}))}document.addEventListener("DOMContentLoaded",(function(){window.history.replaceState&&window.history.replaceState(null,null,window.location.href),document.querySelectorAll("#s_title, #s_link, #s_tags").forEach((e=>{e.addEventListener("keyup",(function(){var t=e.value.toLowerCase();Array.from(document.getElementById("bookmarks").children).filter((function(e){var o=e.getAttribute("data-search").toLowerCase().indexOf(t);e.style.display=o>-1?"block":"none"}))}))}))}),!1),document.addEventListener("DOMContentLoaded",(function(){var e;if("IntersectionObserver"in window){e=document.querySelectorAll(".lazy");var t=new IntersectionObserver((function(e,o){e.forEach((function(e){if(e.isIntersecting){var o=e.target;o.classList.remove("lazy"),t.unobserve(o)}}))}));e.forEach((function(e){t.observe(e)}))}else{var o;function n(){o&&clearTimeout(o),o=setTimeout((function(){var t=window.pageYOffset;e.forEach((function(e){e.offsetTop<window.innerHeight+t&&(e.src=e.dataset.src,e.classList.remove("lazy"))})),0==e.length&&(document.removeEventListener("scroll",n),window.removeEventListener("resize",n),window.removeEventListener("orientationChange",n))}),20)}e=document.querySelectorAll(".lazy"),document.addEventListener("scroll",n),window.addEventListener("resize",n),window.addEventListener("orientationChange",n)}}));